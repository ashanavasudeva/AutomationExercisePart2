<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="3430b9c8-562f-4414-a242-6d8640b1148f" activeEnvironment="Default environment" name="AutomationExercisePart2" resourceRoot="" soapui-version="6.0.0" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="1c1bed29-83c6-487a-baa8-686885e1d2d4" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://api.data.gov" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://api.data.gov</con:endpoint></con:endpoints><con:resource name="Alt-fuel-stations-v1" path="/nrel/alt-fuel-stations/v1/nearest.json" id="a512a0b0-dc2f-4b1e-b63f-ed8a182c9af9"><con:settings/><con:parameters><con:parameter><con:name>api_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>location</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="e4726bb3-e742-4c38-bb59-204bb3c57299" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:near="https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json">near:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:near="https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json">near:Fault</con:element></con:representation><con:request name="Request 1" id="b163ca0d-5a15-41d6-a9e6-58fb2387be62" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://api.data.gov</con:endpoint><con:request/><con:originalUri>https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json</con:originalUri><con:credentials/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="api_key" value="fcflhx3qKi54i86kKfJpc4GNRLnOdzdAL8FNlAb1"/>
  <con:entry key="location" value="Austin+TX"/>
</con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>location</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="fb84b7ff-a44b-4ec7-a206-cfc4bcffe6f1" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://developer.nrel.gov" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://developer.nrel.gov</con:endpoint></con:endpoints><con:resource name="v1" path="/api/alt-fuel-stations/v1/" id="ef1e9b31-0452-4cc1-9615-f2a99f6f3895"><con:settings/><con:parameters/><con:resource name="{id}.json" path="{id}.json" id="30a4b7d4-7969-4185-afee-6ddb0aa1df77"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value>${#TestSuite#stationID}</con:value><con:style>TEMPLATE</con:style><con:default>${#TestSuite#stationID}</con:default></con:parameter><con:parameter><con:name>api_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="f3983ca0-0f20-493c-ae8f-d3af1d040b6d" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:json="http://developer.nrel.gov/api/alt-fuel-stations/v1/.json">json:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:json="http://developer.nrel.gov/api/alt-fuel-stations/v1/.json">json:Response</con:element></con:representation><con:request name="Request 1" id="68b5792a-caac-498a-a990-7c7537708b29" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://developer.nrel.gov</con:endpoint><con:request/><con:originalUri>http://developer.nrel.gov/api/alt-fuel-stations/v1/.json</con:originalUri><con:credentials/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="api_key" value="fcflhx3qKi54i86kKfJpc4GNRLnOdzdAL8FNlAb1" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry><con:entry>api_key</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:method name="Method 1" id="02527168-8180-45c5-9b1d-7f89da20085a" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="ab19577f-8537-4912-90b1-b0d04e927198" mediaType="application/json"><con:settings/><con:endpoint>http://developer.nrel.gov</con:endpoint><con:request/><con:credentials/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="f55d9692-40a0-448d-945f-287deedd97d5" name="AutomationExercisePart2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="faa191cb-f356-4bc3-a453-fd28c430b5a7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="GetAllStations&amp;CheckHyattAustin" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="AllFuelStationsAustin" id="7c397808-f1a5-4e77-8df7-1cb0c66e6104"><con:settings/><con:config service="https://api.data.gov" resourcePath="/nrel/alt-fuel-stations/v1/nearest.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Method 1 - Request 1" id="b163ca0d-5a15-41d6-a9e6-58fb2387be62" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://api.data.gov</con:endpoint><con:request/><con:originalUri>https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="api_key" value="fcflhx3qKi54i86kKfJpc4GNRLnOdzdAL8FNlAb1"/>
  <con:entry key="location" value="Austin+TX"/>
</con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>location</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="AssertHyattAustin&amp;SaveStationID" id="8b52c92b-fcc6-421f-89e9-c3fae904cb48"><con:settings/><con:config><script>import groovy.json.JsonSlurper

responseContent = testRunner.testCase.getTestStepByName("AllFuelStationsAustin").getPropertyValue("response")
jsonResponse = new JsonSlurper().parseText(responseContent)

assert jsonResponse.fuel_stations!= null 
def list = []
def size = jsonResponse.fuel_stations.size()

for(i = 0; i &lt; size; i++)
{
	if(jsonResponse.fuel_stations[i].ev_network.contains("ChargePoint Network" )){
		list.add(jsonResponse.fuel_stations[i].station_name)
		if(jsonResponse.fuel_stations[i].station_name == 'HYATT AUSTIN'){
			stationId = jsonResponse.fuel_stations[i].id.toString()
		}
	}
}

//Search list
assert list.find{it == 'HYATT AUSTIN'}
context.testCase.testSuite.setPropertyValue("stationID", stationId)


</script></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>8b52c92b-fcc6-421f-89e9-c3fae904cb48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e09f019d-dde8-4224-87cf-92bd8a0dc029" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="VerifyStreetAddressForHyattAustin" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Method 1 - Request 1" id="5790dc78-1909-4673-9e19-d1c8b8133d82"><con:settings/><con:config service="http://developer.nrel.gov" resourcePath="/api/alt-fuel-stations/v1/{id}.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Method 1 - Request 1" id="68b5792a-caac-498a-a990-7c7537708b29" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://developer.nrel.gov</con:endpoint><con:request/><con:originalUri>http://developer.nrel.gov/api/alt-fuel-stations/v1/.json</con:originalUri><con:assertion type="GroovyScriptAssertion" id="f902fd6e-1f38-4487-9f17-d76a82c8655d" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper
import groovy.util.logging.*

def response = messageExchange.response.responseContent
def slurper = new JsonSlurper()
def jsonResponse=slurper.parseText(response)

assert jsonResponse.alt_fuel_station.station_name == "HYATT AUSTIN"
assert jsonResponse.alt_fuel_station.street_address == "208 Barton Springs Rd"
assert jsonResponse.alt_fuel_station.city == "Austin"
assert jsonResponse.alt_fuel_station.state == "TX"
assert jsonResponse.alt_fuel_station.zip == "78704"
</scriptText></con:configuration></con:assertion><con:assertion type="Invalid HTTP Status Codes" id="7ecd2c7e-6bb5-43c5-822c-af0663ee71a3" name="Invalid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="f584e8db-00bf-46a6-9cc7-86ad6d6d86d5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="api_key" value="fcflhx3qKi54i86kKfJpc4GNRLnOdzdAL8FNlAb1" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry><con:entry>api_key</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties><con:property><con:name>stationID</con:name><con:value/></con:property><con:property><con:name>stationID</con:name><con:value>62029</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:requirements/><con:properties/><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:xmlTemplates/><con:parameters/><con:parameters/></con:reporting><con:reporting/><con:authRepository/></con:soapui-project>